var win = Ti.UI.currentWindow;


var label = Ti.UI.createLabel({
	text : 'Liste des Sondages ',
	height : "auto",
	width : "auto",
	bottom: 1,
	textAlign : 'center'
});


var winSondage1 = Titanium.UI.createWindow({  
    title:'Sondages',
    backgroundColor:'blue',
    url: "/lib/sondage1.js"
});

var winSondage2 = Titanium.UI.createWindow({  
    title:'Sondages',
    backgroundColor:'green',
    url: "/lib/sondage2.js"
});

var winSondage3 = Titanium.UI.createWindow({  
    title:'Sondages',
    backgroundColor:'pink',
    url: "/lib/sondage3.js"
});




var tableS = [ {leftImage:"/images/A.png",title: "Sondage 1",top: '5%', window:winSondage1}, {leftImage:"/images/B.png",title: "Sondage 2"}, {leftImage:"/images/C.png",title: "Sondage 3"}];
var tableSondages = Ti.UI.createTableView({
  data: tableS
});


win.add(label);
win.add(tableSondages);

//// Events handle


var lastSelectedSondages =null;
tableSondages.addEventListener('click',function(e){
	
  if (!e.rowData.selected) 
  {
    	if (lastSelectedSondages != null) 
    	{
    		lastSelectedSondages.setBackgroundColor('white');
    		lastSelectedSondages.selected = false;
    		lastSelectedSondages.hasCheck = false;
    	};
    	
    //alert(repUser[1]);
	//alert('title: \'' + e.row.title + '\', index: ' + e.index); 
	
	alert(e.index);
	switch(e.index) {
    case 0:
        win.add(winSondage1);
        break;
    case 1:
        win.add(winSondage2);
        break;
    default:
        win.add(winSondage3);
}


	
    	//win.add(winSondage1);
    	e.rowData.setBackgroundColor('purple');
    	e.row.hasCheck = true;
    	lastSelectedSondages = e.rowData;
  };
  e.rowData.selected = !e.rowData.selected;
});

//// End Events handle
package org.composants;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Date;

import org.entitees.Commande;
import org.entitees.LigneCommande;
import org.entitees.Produit;
import org.entitees.Utilisateur;

public class CmdAddImpl implements CmdAddInterface {


	public void addCommande(Commande cmd,LigneCommande lcmd, int quantite, double prix) {
		if (cmd.getLigneCommande() == null) {
			cmd.setLigneCommande(new ArrayList<LigneCommande>());
		}
		lcmd.setQuantiteProduitl(lcmd.getQuantiteProduitl() + quantite);
		lcmd.setPrix(lcmd.getPrix() + (quantite * prix));
		cmd.setPrixTotalCommande(cmd.getPrixTotalCommande() + lcmd.getPrix() + (quantite * prix) );
	}
	
	public void updateCmdAndLineCmd(Commande cmd, LigneCommande lcmd, int quantite, double prix){
        if (cmd.getLigneCommande() == null) {
        	cmd.setLigneCommande(new ArrayList<LigneCommande>());
        }
        int oldQuantite = lcmd.getQuantiteProduitl();
        lcmd.setQuantiteProduitl(quantite);
        lcmd.setPrix(quantite * prix);
        cmd.setPrixTotalCommande(cmd.getPrixTotalCommande() - (oldQuantite * prix));
        cmd.setPrixTotalCommande(cmd.getPrixTotalCommande() + (quantite * prix));
	}
	
	
	Long cmdID = new Long(0);
	
	
	public LigneCommande addCommandeAndLineCommande(Commande cmd, Produit produit, int quantite, double prix){
	
		if (cmd.getLigneCommande() == null || cmd.getLigneCommande().isEmpty()){
			cmd.setLigneCommande(new ArrayList<LigneCommande>());
		}
		
		
	}
	
    public LineItem addPurchaseAndLineItem(Product product, int quantity, double price) {

        if (lineItems == null || lineItems.isEmpty()) {
            lineItems = new ArrayList<LineItem>();
        }
        LineItem item = new LineItem();
        item.setId(itemId);
        item.setProduct(product);
        item.setQuantity(quantity);
        item.setSubTotal(quantity * price);
        lineItems.add(item);
        totalPrice += quantity * price;
        itemId = itemId + 1;
        return item;
    }
    
    
	

}
